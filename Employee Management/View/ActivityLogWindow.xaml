<Window x:Class="Employee_Management.View.ActivityLogWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Lịch sử hoạt động" Height="600" Width="900" Background="#2C3E50">

    <Grid>
        <!-- Border chứa danh sách lịch sử hoạt động -->
        <Border Background="#34495E" CornerRadius="10" BorderBrush="#1ABC9C" BorderThickness="2"
                Margin="10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Thanh tìm kiếm và nút chức năng -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="10" Grid.Row="0">
                    <!-- Label và TextBox tìm kiếm -->
                    <Label Content="Tìm Kiếm:" VerticalAlignment="Center" Foreground="White" FontWeight="Bold"/>
                    <TextBox x:Name="txtSearch" Width="200" Height="30" Padding="5"
                             Background="#ECF0F1" BorderBrush="#1ABC9C" BorderThickness="1"
                             Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"/>

                    <!-- ComboBox để chọn người dùng -->
                    <Label Content=" Người dùng:" VerticalAlignment="Center" Foreground="White" FontWeight="Bold" Margin="10,0,0,0"/>
                    <ComboBox ItemsSource="{Binding Users}" 
                              DisplayMemberPath="Username" 
                              SelectedValuePath="UserId" 
                              SelectedValue="{Binding SelectedUserId, Mode=TwoWay}" 
                              Width="200" Height="30" Margin="10,0,0,0"/>

                    <!-- Nút tải lại dữ liệu -->
                    <Button Content="Tải lại" Width="100" Height="30" Margin="10,0,0,0"
                            Background="#3498DB" Foreground="White" FontWeight="Bold"
                            BorderBrush="Transparent" Cursor="Hand" Command="{Binding LoadCommand}"/>

                    <!-- Nút quay lại -->
                    <Button Content="Quay lại" Width="100" Height="30" Margin="10,0,0,0"
                            Background="#E74C3C" Foreground="White" FontWeight="Bold"
                            BorderBrush="Transparent" Cursor="Hand" Command="{Binding BackCommand}"/>
                </StackPanel>

                <!-- DataGrid hiển thị lịch sử hoạt động -->
                <DataGrid x:Name="dgActivityLogs" Grid.Row="1" Margin="10" AutoGenerateColumns="False"
                          Background="Transparent" RowBackground="#ECF0F1" AlternatingRowBackground="#D5DBDB"
                          HeadersVisibility="Column" IsReadOnly="True" ItemsSource="{Binding ActivityLogs}">
                    <DataGrid.Columns>
                        <!-- Cột Hành động -->
                        <DataGridTextColumn Header="Hành động" Binding="{Binding Action}" Width="1.5*"/>

                        <!-- Cột Chi tiết -->
                        <DataGridTextColumn Header="Chi tiết" Binding="{Binding Details}" Width="2*"/>

                        <!-- Cột Thời gian -->
                        <DataGridTextColumn Header="Thời gian" Binding="{Binding ActionDate, StringFormat='dd/MM/yyyy HH:mm:ss'}" Width="1.5*"/>

                        <!-- Cột Người dùng -->
                        <DataGridTextColumn Header="Người dùng" Binding="{Binding Username}" Width="1.5*"/>
                    </DataGrid.Columns>
                </DataGrid>

                <!-- Footer -->
                <TextBlock Grid.Row="2" Text="Lịch sử hoạt động - Hệ thống quản lý nhân sự" HorizontalAlignment="Center"
                           Foreground="White" FontSize="12" Margin="10"/>
            </Grid>
        </Border>
    </Grid>
</Window>