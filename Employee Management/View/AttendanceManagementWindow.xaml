<Window x:Class="Employee_Management.View.AttendanceManagementWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Quản lý chấm công" Height="600" Width="1200" Background="#2C3E50">

    <Grid>
        <!-- Border chứa danh sách chấm công -->
        <Border Background="#34495E" CornerRadius="10" BorderBrush="#1ABC9C" BorderThickness="2"
                Margin="10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Thanh lọc và nút chức năng -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="10" Grid.Row="0">
                    <!-- DatePicker để chọn ngày -->
                    <Label Content="Chọn ngày:" VerticalAlignment="Center" Foreground="White" FontWeight="Bold"/>
                    <DatePicker x:Name="dpFilterDate" Width="150" Height="30" Margin="10,0,0,0"
                                SelectedDate="{Binding FilterDate, UpdateSourceTrigger=PropertyChanged}"/>

                    <!-- ComboBox để chọn trạng thái -->
                    <Label Content=" Trạng thái:" VerticalAlignment="Center" Foreground="White" FontWeight="Bold" Margin="10,0,0,0"/>
                    <ComboBox ItemsSource="{Binding AttendanceStatuses}" 
                              SelectedItem="{Binding SelectedAttendanceStatus, Mode=TwoWay}" 
                              Width="150" Height="30" Margin="10,0,0,0"/>

                    <!-- Các nút chức năng -->
                    <Button Content="Lọc" Width="100" Height="30" Margin="10,0,0,0"
                            Background="#1ABC9C" Foreground="White" FontWeight="Bold"
                            BorderBrush="Transparent" Cursor="Hand" Command="{Binding FilterCommand}"/>
                    <Button Content="Tải lại" Width="100" Height="30" Margin="10,0,0,0"
                            Background="#3498DB" Foreground="White" FontWeight="Bold"
                            BorderBrush="Transparent" Cursor="Hand" Command="{Binding LoadCommand}"/>
                    <Button Content="Quay lại" Width="120" Height="30" Margin="10,0,0,0"
                            Background="#E74C3C" Foreground="White" FontWeight="Bold"
                            BorderBrush="Transparent" Cursor="Hand" Command="{Binding BackCommand}"/>
                </StackPanel>

                <!-- ComboBox để chọn tháng và năm -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="10" Grid.Row="1">
                    <!-- ComboBox chọn tháng -->
                    <Label Content="Tháng:" VerticalAlignment="Center" Foreground="White" FontWeight="Bold"/>
                    <ComboBox x:Name="cbMonth" Width="100" Height="30" Margin="10,0,0,0"
                              ItemsSource="{Binding Months}"
                              SelectedItem="{Binding SelectedMonth, Mode=TwoWay}"/>

                    <!-- ComboBox chọn năm -->
                    <Label Content="Năm:" VerticalAlignment="Center" Foreground="White" FontWeight="Bold" Margin="10,0,0,0"/>
                    <ComboBox x:Name="cbYear" Width="100" Height="30" Margin="10,0,0,0"
                              ItemsSource="{Binding Years}"
                              SelectedItem="{Binding SelectedYear, Mode=TwoWay}"/>

                    <!-- Nút xem báo cáo -->
                    <Button Content="Xem báo cáo" Width="120" Height="30" Margin="10,0,0,0"
                            Background="#9B59B6" Foreground="White" FontWeight="Bold"
                            BorderBrush="Transparent" Cursor="Hand" Command="{Binding ViewReportCommand}"/>
                </StackPanel>

                <!-- DataGrid hiển thị danh sách chấm công -->
                <DataGrid x:Name="dgAttendance" Grid.Row="2" Margin="10" AutoGenerateColumns="False"
                          Background="Transparent" RowBackground="#ECF0F1" AlternatingRowBackground="#D5DBDB"
                          HeadersVisibility="Column" IsReadOnly="True" ItemsSource="{Binding Attendances}">
                    <DataGrid.Columns>
                        <!-- Cột Tên nhân viên -->
                        <DataGridTextColumn Header="Tên nhân viên" Binding="{Binding EmployeeName}" Width="0.5*"/>

                        <!-- Cột Ngày -->
                        <DataGridTextColumn Header="Ngày" Binding="{Binding Date, StringFormat='dd/MM/yyyy'}" Width="0.3*"/>

                        <!-- Cột Giờ check-in -->
                        <DataGridTextColumn Header="Giờ check-in" Binding="{Binding CheckInTime, StringFormat='HH:mm'}" Width="0.4*"/>

                        <!-- Cột Giờ check-out -->
                        <DataGridTextColumn Header="Giờ check-out" Binding="{Binding CheckOutTime, StringFormat='HH:mm'}" Width="0.4*"/>

                        <!-- Cột Số giờ làm thêm -->
                        <DataGridTextColumn Header="Giờ làm thêm" Binding="{Binding OvertimeHours}" Width="120"/>

                        <!-- Cột Trạng thái -->
                        <DataGridTextColumn Header="Trạng thái" Binding="{Binding AttendStatus}" Width="120"/>
                    </DataGrid.Columns>
                </DataGrid>

                <!-- Footer -->
                <TextBlock Grid.Row="3" Text="Quản lý chấm công - Hệ thống quản lý nhân sự" HorizontalAlignment="Center"
                           Foreground="White" FontSize="12" Margin="10"/>
            </Grid>
        </Border>
    </Grid>
</Window>