<Window x:Class="Employee_Management.View.EmployeeManagement"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Quản lý nhân viên" Height="800" Width="1550" Background="#2C3E50">

    <Grid>
        <!-- Border chứa danh sách nhân viên -->
        <Border Background="#34495E" CornerRadius="10" BorderBrush="#1ABC9C" BorderThickness="2"
                Margin="10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Thanh tìm kiếm và nút chức năng -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="10" Grid.Row="0">
                    <!-- Label và TextBox tìm kiếm -->
                    <Label Content="Tìm Kiếm:" VerticalAlignment="Center" Foreground="White" FontWeight="Bold"/>
                    <TextBox x:Name="txtSearch" Width="200" Height="30" Padding="5"
             Background="#ECF0F1" BorderBrush="#1ABC9C" BorderThickness="1"
             Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"/>

                    <!-- ComboBox để chọn phòng ban -->
                    <Label Content=" Phòng ban:" VerticalAlignment="Center" Foreground="White" FontWeight="Bold" Margin="10,0,0,0"/>
                    <ComboBox ItemsSource="{Binding Departments}" 
                        DisplayMemberPath="DepartmentName" 
                        SelectedValuePath="DepartmentId" 
                    SelectedValue="{Binding SelectedDepartmentId, Mode=TwoWay}" />

                    <Label Content="Giới tính:" VerticalAlignment="Center" Foreground="White" FontWeight="Bold" Margin="10,0,0,0"/>
                    <ComboBox ItemsSource="{Binding Genders}" 
                    SelectedItem="{Binding SelectedGender, Mode=TwoWay}" 
                     Width="100" Height="30" Margin="10,0,0,0"/>

                    <Label Content="Lương tháng:" VerticalAlignment="Center" Foreground="White" FontWeight="Bold" Margin="10,0,0,0"/>
                    <ComboBox ItemsSource="{Binding SalaryRanges}" 
                    SelectedItem="{Binding SelectedSalaryRange, Mode=TwoWay}"
                     Width="150" Height="30" Margin="10,0,0,0"/>

                    <!-- Các nút chức năng -->
                    <Button Content="Tìm" Width="100" Height="30" Margin="10,0,0,0"
            Background="#1ABC9C" Foreground="White" FontWeight="Bold"
            BorderBrush="Transparent" Cursor="Hand" Command="{Binding SearchCommand}"/>
                    <Button Content="Tải" Width="100" Height="30" Margin="10,0,0,0"
            Background="#3498DB" Foreground="White" FontWeight="Bold"
            BorderBrush="Transparent" Cursor="Hand" Command="{Binding LoadCommand}"/>
                    <Button Content="Thêm" Width="120" Height="30" Margin="10,0,0,0"
            Background="#1ABC9C" Foreground="White" FontWeight="Bold"
            BorderBrush="Transparent" Cursor="Hand" Command="{Binding AddCommand}"/>
                    <Button Content="Trang chủ" Width="120" Height="30" Margin="10,0,0,0"
            Background="#E74C3C" Foreground="White" FontWeight="Bold"
            BorderBrush="Transparent" Cursor="Hand" Command="{Binding BackCommand}"/>
                </StackPanel>

                <!-- DataGrid hiển thị danh sách nhân viên -->
                <DataGrid x:Name="dgEmployees" Grid.Row="1" Margin="10" AutoGenerateColumns="False"
                          Background="Transparent" RowBackground="#ECF0F1" AlternatingRowBackground="#D5DBDB"
                          HeadersVisibility="Column" IsReadOnly="True" ItemsSource="{Binding Employees}">
                    <DataGrid.Columns>
                        <!-- Cột Avatar -->
                        <DataGridTemplateColumn Header="Avatar" Width="150">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Image Source="{Binding AvatarImage}" Width="100" Height="70" Stretch="UniformToFill"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <!-- Cột FullName -->
                        <DataGridTextColumn Header="Tên" Binding="{Binding FullName}" Width="0.6*"/>

                        <!-- Cột Date of Birth -->
                        <DataGridTextColumn Header="Ngày sinh" Binding="{Binding DateOfBirth, StringFormat='dd/MM/yyyy'}" Width="80"/>

                        <!-- Cột Gender -->
                        <DataGridTextColumn Header="Giới tính" Binding="{Binding Gender}" Width="80"/>

                        <!-- Cột Address -->
                        <DataGridTextColumn Header="Địa chỉ" Binding="{Binding Address}" Width="1.8*"/>

                        <!-- Cột Phone Number -->
                        <DataGridTextColumn Header="SĐT" Binding="{Binding PhoneNumber}" Width="120"/>

                        <!-- Cột Position -->
                        <DataGridTextColumn Header="Chức vụ" Binding="{Binding Position}" Width="120"/>

                        <!-- Cột Salary -->
                        <DataGridTextColumn Header="Lương Tháng" Binding="{Binding Salary, StringFormat='C'}" Width="120"/>

                        <DataGridTextColumn Header="Số ngày phép" Binding="{Binding RemainingLeaveDays}" Width="120"/>

                        <DataGridTextColumn Header="Ngày bắt đầu" Binding="{Binding StartDate, StringFormat='dd/MM/yyyy'}" Width="80"/>

                        <!-- Cột Action (Edit/Delete) -->
                        <DataGridTemplateColumn Header="Thao tác" Width="1.5*">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" Margin="10,0,0,0">
                                        <Button Content="Sửa" Width="60" Margin="5,0"
                        Background="#3498DB" Foreground="White" FontWeight="Bold"
                        BorderBrush="Transparent" Cursor="Hand"
                        Command="{Binding DataContext.UpdateCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                        CommandParameter="{Binding}"/>
                                        <Button Content="Xoá" Width="60" Margin="5,0"
                        Background="#E74C3C" Foreground="White" FontWeight="Bold"
                        BorderBrush="Transparent" Cursor="Hand"
                        Command="{Binding DataContext.DeleteCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                        CommandParameter="{Binding}"/>
                                        <Button Content="Tạo TK" Width="80" Margin="5,0"
                        Background="#1ABC9C" Foreground="White" FontWeight="Bold"
                        BorderBrush="Transparent" Cursor="Hand"
                        Command="{Binding DataContext.CreateAccountCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                        CommandParameter="{Binding}"/>
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>

                <!-- Footer -->
                <TextBlock Grid.Row="2" Text="Quản lý nhân viên - Hệ thống quản lý nhân sự" HorizontalAlignment="Center"
                           Foreground="White" FontSize="12" Margin="10"/>
            </Grid>
        </Border>
    </Grid>
</Window>